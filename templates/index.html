<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Summary</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Sales Summary</h1>

        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title">Total Sales</h5>
                <p class="card-text fs-3 text-primary" id="total-sales">Calculating...</p>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title">Product Sales</h5>
                <table class="table table-striped" id="product-sales">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Sales</th>
                        </tr>
                    </thead>
                    <tbody id="product-sales-body">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    // Load sales data dynamically from CSV
    async function loadSalesData() {
        try {
            const response = await fetch('data.csv');
            const csvText = await response.text();
            const lines = csvText.trim().split('\n').slice(1);

            let total = 0;
            const tableBody = document.getElementById('product-sales-body');
            tableBody.innerHTML = '';

            lines.forEach(line => {
                if (line.trim()) {
                    // Split by comma or tab
                    const parts = line.includes(',') ? line.split(',') : line.split('\t');
                    const [product, salesStr] = parts.map(s => s.trim());
                    const sales = parseFloat(salesStr);
                    if (!isNaN(sales)) {
                        total += sales;
                        const row = document.createElement('tr');
                        row.innerHTML = `<td>${product}</td><td>${sales.toFixed(2)}</td>`;
                        tableBody.appendChild(row);
                    }
                }
            });

            document.getElementById('total-sales').textContent = total.toFixed(2);
        } catch (error) {
            console.error('Error loading sales data:', error);
            document.getElementById('total-sales').textContent = 'Error';
        }
    }

    document.addEventListener('DOMContentLoaded', loadSalesData);
    </script>
</body>
</html>
